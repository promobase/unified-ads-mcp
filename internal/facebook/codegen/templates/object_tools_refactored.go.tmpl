// Code generated by codegen. DO NOT EDIT.

package generated

import (
	"context"
	"encoding/json"

	"github.com/mark3labs/mcp-go/mcp"
	"github.com/mark3labs/mcp-go/server"
)

// Tool schemas for {{.ObjectName}}
var (
{{range .Tools}}
	{{.ToolName}}Schema = json.RawMessage(`{{.InputSchema}}`)
{{end}}
)

{{range .Tools}}
// {{.HandlerName}} handles {{.ToolName}}
func {{.HandlerName}}(ctx context.Context, request mcp.CallToolRequest) (*mcp.CallToolResult, error) {
	{{if and (eq .Method "GET") (not .HasComplexLogic)}}
	// Use standard GET handler
	return StandardGETHandler(ctx, request, "{{.Endpoint}}", "{{.ObjectName}}", {{.NeedsID}})
	{{else if and (eq .Method "POST") (not .HasComplexLogic) (not .HasQueryParams)}}
	// Use standard POST handler
	return StandardPOSTHandler(ctx, request, "{{.Endpoint}}", {{.NeedsID}})
	{{else if and (eq .Method "DELETE") (not .HasComplexLogic)}}
	// Use standard DELETE handler
	return StandardDELETEHandler(ctx, request, "{{.Endpoint}}")
	{{else}}
	// Custom implementation required
	// Initialize parameters
	params := InitializeParams(request)
	
	{{if eq .Method "GET" "DELETE"}}
	// Build query parameters
	query := BuildQueryParameters()
	{{if .NeedsID}}
	// Extract ID
	id, err := ExtractRequiredID(params)
	if err != nil {
		return mcp.NewToolResultErrorf(err.Error()), nil
	}
	{{else}}
	id := ExtractOptionalID(params)
	{{end}}
	
	{{if eq .Method "GET"}}
	// Handle fields parameter
	HandleFieldsParameter(params, query, "{{.ObjectName}}")
	{{end}}
	
	// Add remaining parameters
	AddRemainingParams(params, query)
	
	// Build URL
	baseURL := buildGraphURL(id, "{{.Endpoint}}")
	fullURL := BuildURLWithQuery(baseURL, query)
	
	// Execute request
	return Execute{{.Method}}Request(ctx, fullURL)
	{{else}}
	// POST/PUT request
	{{if .NeedsID}}
	// Extract ID
	id, err := ExtractRequiredID(params)
	if err != nil {
		return mcp.NewToolResultErrorf(err.Error()), nil
	}
	{{else}}
	id := ExtractOptionalID(params)
	{{end}}
	
	// Build URL
	url := buildGraphURL(id, "{{.Endpoint}}")
	
	// Execute request with params as body
	return Execute{{.Method}}Request(ctx, url, params)
	{{end}}
	{{end}}
}

{{end}}

// Register{{.ObjectName}}Tools registers all {{.ObjectName}} tools with the MCP server
func Register{{.ObjectName}}Tools(s *server.MCPServer) error {
	{{range .Tools}}
	s.AddTool(
		mcp.NewToolWithRawSchema(
			"{{.ToolName}}",
			"{{.Description}}",
			{{.ToolName}}Schema,
		),
		{{.HandlerName}},
	)
	{{end}}
	
	return nil
}

// {{.ObjectName}} tools: {{.TotalTools}} endpoints